{%- comment -%} Convert src â†’ full URL {%- endcomment -%}
{%- capture src_final -%}
{%- include url_from_src.html src=include.src mw_width=include.mw_width -%}
{%- endcapture -%}
{%- assign src_final = src_final | strip -%}

{%- assign qs = "src=" | append: src_final | uri_escape -%}

{%- if include.caption -%}
{%- assign qs = qs | append: "&caption=" | append: include.caption | uri_escape -%}
{%- endif -%}

{%- if include.aspect -%}
{%- assign qs = qs | append: "&aspect=" | append: include.aspect | uri_escape -%}
{%- endif -%}

{%- if include.ghbase -%}
{%- assign qs = qs | append: "&ghbase=" | append: include.ghbase | uri_escape -%}
{%- endif -%}

<iframe id="{{ include.id }}" class="embed-image" loading="lazy" title="Juncture image viewer" allow="clipboard-write"
  style="aspect-ratio:{{ include.aspect | default: '1.0' }};"
  src="{{ '/assets/components/image.html' | relative_url }}?{{ qs }}" allowfullscreen>
</iframe>